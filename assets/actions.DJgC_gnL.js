import{b as B,af as S,c as b,p as L,E as ra,h as T,a as M,ag as K,ah as Y,ai as k,aj as y,d as C,ak as na,y as fa,al as Q,am as H,g as z,an as P,ao as ia,ap as la,aq as sa,ar as W,k as ta,q as ua,as as F,at as U,U as va,I as X,au as Z,av as $,aw as da,ax as oa,ay as ca,az as j,aA as _a,aB as ha,aC as G,aD as Ea,f as ma,u as pa}from"./utils.oM5l8dKR.js";function Ra(i,a,e,s=null,_=!1){T&&M();var l=i,r=null,t=null,u=null,h=_?ra:0;B(()=>{if(u===(u=!!a()))return;let d=!1;if(T){const E=l.data===K;u===E&&(l=Y(),k(l),y(!1),d=!0)}u?(r?S(r):r=b(()=>e(l)),t&&L(t,()=>{t=null})):(t?S(t):s&&(t=b(()=>s(l))),r&&L(r,()=>{r=null})),d&&y(!0)},h),T&&(l=C)}function wa(i,a){return a}function Ta(i,a,e,s){for(var _=[],l=a.length,r=0;r<l;r++)ia(a[r].e,_,!0);var t=l>0&&_.length===0&&e!==null;if(t){var u=e.parentNode;la(u),u.append(e),s.clear(),w(i,a[0].prev,a[l-1].next)}sa(_,()=>{for(var h=0;h<l;h++){var d=a[h];t||(s.delete(d.k),w(i,d.prev,d.next)),W(d.e,!t)}})}function Ca(i,a,e,s,_,l=null){var r=i,t={flags:a,items:new Map,first:null},u=(a&Z)!==0;if(u){var h=i;r=T?k($(h)):h.appendChild(na())}T&&M();var d=null,E=!1;B(()=>{var n=e(),c=fa(n)?n:n==null?[]:Q(n),o=c.length;if(E&&o===0)return;E=o===0;let g=!1;if(T){var p=r.data===K;p!==(o===0)&&(r=Y(),k(r),y(!1),g=!0)}if(T){for(var A=null,I,m=0;m<o;m++){if(C.nodeType===8&&C.data===da){r=C,g=!0,y(!1);break}var f=c[m],v=s(f,m);I=aa(C,t,A,null,f,v,m,_,a),t.items.set(v,I),A=I}o>0&&k(Y())}if(!T){var O=ta;Aa(c,t,r,_,a,(O.f&H)!==0,s)}l!==null&&(o===0?d?S(d):d=b(()=>l(r)):d!==null&&L(d,()=>{d=null})),g&&y(!0),e()}),T&&(r=C)}function Aa(i,a,e,s,_,l,r){var t=(_&oa)!==0,u=(_&(F|U))!==0,h=i.length,d=a.items,E=a.first,n=E,c,o=null,g,p=[],A=[],I,m,f,v;if(t)for(v=0;v<h;v+=1)I=i[v],m=r(I,v),f=d.get(m),f!==void 0&&(f.a?.measure(),(g??=new Set).add(f));for(v=0;v<h;v+=1){if(I=i[v],m=r(I,v),f=d.get(m),f===void 0){var O=n?n.e.nodes_start:e;o=aa(O,a,o,o===null?a.first:o.next,I,m,v,s,_),d.set(m,o),p=[],A=[],n=o.next;continue}if(u&&Ia(f,I,v,_),f.e.f&H&&(S(f.e),t&&(f.a?.unfix(),(g??=new Set).delete(f))),f!==n){if(c!==void 0&&c.has(f)){if(p.length<A.length){var D=A[0],R;o=D.prev;var V=p[0],q=p[p.length-1];for(R=0;R<p.length;R+=1)J(p[R],D,e);for(R=0;R<A.length;R+=1)c.delete(A[R]);w(a,V.prev,q.next),w(a,o,V),w(a,q,D),n=D,o=q,v-=1,p=[],A=[]}else c.delete(f),J(f,n,e),w(a,f.prev,f.next),w(a,f,o===null?a.first:o.next),w(a,o,f),o=f;continue}for(p=[],A=[];n!==null&&n.k!==m;)(l||!(n.e.f&H))&&(c??=new Set).add(n),A.push(n),n=n.next;if(n===null)continue;f=n}p.push(f),o=f,n=f.next}if(n!==null||c!==void 0){for(var N=c===void 0?[]:Q(c);n!==null;)(l||!(n.e.f&H))&&N.push(n),n=n.next;var x=N.length;if(x>0){var ea=_&Z&&h===0?e:null;if(t){for(v=0;v<x;v+=1)N[v].a?.measure();for(v=0;v<x;v+=1)N[v].a?.fix()}Ta(a,N,ea,d)}}t&&ua(()=>{if(g!==void 0)for(f of g)f.a?.apply()}),z.first=a.first&&a.first.e,z.last=o&&o.e}function Ia(i,a,e,s){s&F&&P(i.v,a),s&U?P(i.i,e):i.i=e}function aa(i,a,e,s,_,l,r,t,u){var h=(u&F)!==0,d=(u&ca)===0,E=h?d?va(_):X(_):_,n=u&U?X(r):r,c={i:n,v:E,k:l,a:null,e:null,prev:e,next:s};try{return c.e=b(()=>t(i,E,n),T),c.e.prev=e&&e.e,c.e.next=s&&s.e,e===null?a.first=c:(e.next=c,e.e.next=c.e),s!==null&&(s.prev=c,s.e.prev=c.e),c}finally{}}function J(i,a,e){for(var s=i.next?i.next.e.nodes_start:e,_=a?a.e.nodes_start:e,l=i.e.nodes_start;l!==s;){var r=j(l);_.before(l),l=r}}function w(i,a,e){a===null?i.first=e:(a.next=e,a.e.next=e&&e.e),e!==null&&(e.prev=a,e.e.prev=a&&a.e)}function Na(i,a,e,s,_){var l=i,r="",t;B(()=>{if(r===(r=a()??"")){T&&M();return}t!==void 0&&(W(t),t=void 0),r!==""&&(t=b(()=>{if(T){C.data;for(var u=M(),h=u;u!==null&&(u.nodeType!==8||u.data!=="");)h=u,u=j(u);if(u===null)throw _a(),ha;G(C,h),l=k(u);return}var d=r+"",E=Ea(d);G($(E),E.lastChild),l.before(E)}))})}function ka(i,a,e){ma(()=>{var s=pa(()=>a(i,e?.())||{});if(s?.destroy)return()=>s.destroy()})}export{ka as a,wa as b,Ca as e,Na as h,Ra as i};
