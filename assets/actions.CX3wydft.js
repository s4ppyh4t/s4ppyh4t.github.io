import{b as Y,al as S,a as H,p as F,h as T,c as M,E as ra,am as X,an as L,ao as b,ap as y,d as C,aq as na,F as fa,ar as K,as as D,g as G,at as J,au as ia,av as la,aw as sa,ax as W,t as ta,q as ua,ay as B,az as V,_ as va,Q as P,aA as Z,aB as $,aC as da,aD as oa,aE as ca,aF as j,aG as _a,aH as ha,aI as Q,aJ as Ea,f as ma,u as pa}from"./utils.CQFzoSWC.js";function ga(i,a,e,s=null,_=!1){T&&M();var l=i,r=null,t=null,u=null,h=_?ra:0;Y(()=>{if(u===(u=!!a()))return;let d=!1;if(T){const E=l.data===X;u===E&&(l=L(),b(l),y(!1),d=!0)}u?(r?S(r):r=H(()=>e(l)),t&&F(t,()=>{t=null})):(t?S(t):s&&(t=H(()=>s(l))),r&&F(r,()=>{r=null})),d&&y(!0)},h),T&&(l=C)}function wa(i,a){return a}function Ta(i,a,e,s){for(var _=[],l=a.length,r=0;r<l;r++)ia(a[r].e,_,!0);var t=l>0&&_.length===0&&e!==null;if(t){var u=e.parentNode;la(u),u.append(e),s.clear(),w(i,a[0].prev,a[l-1].next)}sa(_,()=>{for(var h=0;h<l;h++){var d=a[h];t||(s.delete(d.k),w(i,d.prev,d.next)),W(d.e,!t)}})}function Ca(i,a,e,s,_,l=null){var r=i,t={flags:a,items:new Map,first:null},u=(a&Z)!==0;if(u){var h=i;r=T?b($(h)):h.appendChild(na())}T&&M();var d=null,E=!1;Y(()=>{var n=e(),c=fa(n)?n:n==null?[]:K(n),o=c.length;if(E&&o===0)return;E=o===0;let R=!1;if(T){var p=r.data===X;p!==(o===0)&&(r=L(),b(r),y(!1),R=!0)}if(T){for(var A=null,I,m=0;m<o;m++){if(C.nodeType===8&&C.data===da){r=C,R=!0,y(!1);break}var f=c[m],v=s(f,m);I=aa(C,t,A,null,f,v,m,_,a),t.items.set(v,I),A=I}o>0&&b(L())}if(!T){var O=ta;Aa(c,t,r,_,a,(O.f&D)!==0,s)}l!==null&&(o===0?d?S(d):d=H(()=>l(r)):d!==null&&F(d,()=>{d=null})),R&&y(!0),e()}),T&&(r=C)}function Aa(i,a,e,s,_,l,r){var t=(_&oa)!==0,u=(_&(B|V))!==0,h=i.length,d=a.items,E=a.first,n=E,c,o=null,R,p=[],A=[],I,m,f,v;if(t)for(v=0;v<h;v+=1)I=i[v],m=r(I,v),f=d.get(m),f!==void 0&&(f.a?.measure(),(R??=new Set).add(f));for(v=0;v<h;v+=1){if(I=i[v],m=r(I,v),f=d.get(m),f===void 0){var O=n?n.e.nodes_start:e;o=aa(O,a,o,o===null?a.first:o.next,I,m,v,s,_),d.set(m,o),p=[],A=[],n=o.next;continue}if(u&&Ia(f,I,v,_),f.e.f&D&&(S(f.e),t&&(f.a?.unfix(),(R??=new Set).delete(f))),f!==n){if(c!==void 0&&c.has(f)){if(p.length<A.length){var k=A[0],g;o=k.prev;var z=p[0],q=p[p.length-1];for(g=0;g<p.length;g+=1)U(p[g],k,e);for(g=0;g<A.length;g+=1)c.delete(A[g]);w(a,z.prev,q.next),w(a,o,z),w(a,q,k),n=k,o=q,v-=1,p=[],A=[]}else c.delete(f),U(f,n,e),w(a,f.prev,f.next),w(a,f,o===null?a.first:o.next),w(a,o,f),o=f;continue}for(p=[],A=[];n!==null&&n.k!==m;)(l||!(n.e.f&D))&&(c??=new Set).add(n),A.push(n),n=n.next;if(n===null)continue;f=n}p.push(f),o=f,n=f.next}if(n!==null||c!==void 0){for(var N=c===void 0?[]:K(c);n!==null;)(l||!(n.e.f&D))&&N.push(n),n=n.next;var x=N.length;if(x>0){var ea=_&Z&&h===0?e:null;if(t){for(v=0;v<x;v+=1)N[v].a?.measure();for(v=0;v<x;v+=1)N[v].a?.fix()}Ta(a,N,ea,d)}}t&&ua(()=>{if(R!==void 0)for(f of R)f.a?.apply()}),G.first=a.first&&a.first.e,G.last=o&&o.e}function Ia(i,a,e,s){s&B&&J(i.v,a),s&V?J(i.i,e):i.i=e}function aa(i,a,e,s,_,l,r,t,u){var h=(u&B)!==0,d=(u&ca)===0,E=h?d?va(_):P(_):_,n=u&V?P(r):r,c={i:n,v:E,k:l,a:null,e:null,prev:e,next:s};try{return c.e=H(()=>t(i,E,n),T),c.e.prev=e&&e.e,c.e.next=s&&s.e,e===null?a.first=c:(e.next=c,e.e.next=c.e),s!==null&&(s.prev=c,s.e.prev=c.e),c}finally{}}function U(i,a,e){for(var s=i.next?i.next.e.nodes_start:e,_=a?a.e.nodes_start:e,l=i.e.nodes_start;l!==s;){var r=j(l);_.before(l),l=r}}function w(i,a,e){a===null?i.first=e:(a.next=e,a.e.next=e&&e.e),e!==null&&(e.prev=a,e.e.prev=a&&a.e)}function Na(i,a,e,s,_){var l=i,r="",t;Y(()=>{if(r===(r=a()??"")){T&&M();return}t!==void 0&&(W(t),t=void 0),r!==""&&(t=H(()=>{if(T){C.data;for(var u=M(),h=u;u!==null&&(u.nodeType!==8||u.data!=="");)h=u,u=j(u);if(u===null)throw _a(),ha;Q(C,h),l=b(u);return}var d=r+"",E=Ea(d);Q($(E),E.lastChild),l.before(E)}))})}function ba(i,a,e){ma(()=>{var s=pa(()=>a(i,e?.())||{});if(s?.destroy)return()=>s.destroy()})}export{ba as a,wa as b,Ca as e,Na as h,ga as i};
