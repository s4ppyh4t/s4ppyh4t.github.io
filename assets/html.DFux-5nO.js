import{q as V,am as y,w as D,v as F,x as T,y as M,E as ra,an as X,ao as L,ap as H,aq as b,z as g,ar as na,V as fa,as as Q,at as k,F as G,au as J,av as ia,aw as la,ax as sa,ay as W,M as ua,H as ta,az as Y,aA as z,ab as va,a6 as K,aB as Z,aC as $,aD as da,aE as oa,aF as _a,aG as j,aH as ca,aI as ha,aJ as P,aK as Ea}from"./utils.DJK4EfyT.js";function Ia(l,a,e,v=null,c=!1){T&&M();var i=l,r=null,s=null,u=null,h=c?ra:0;V(()=>{if(u===(u=!!a()))return;let d=!1;if(T){const E=i.data===X;u===E&&(i=L(),H(i),b(!1),d=!0)}u?(r?y(r):r=D(()=>e(i)),s&&F(s,()=>{s=null})):(s?y(s):v&&(s=D(()=>v(i))),r&&F(r,()=>{r=null})),d&&b(!0)},h),T&&(i=g)}function wa(l,a){return a}function ma(l,a,e,v){for(var c=[],i=a.length,r=0;r<i;r++)ia(a[r].e,c,!0);var s=i>0&&c.length===0&&e!==null;if(s){var u=e.parentNode;la(u),u.append(e),v.clear(),C(l,a[0].prev,a[i-1].next)}sa(c,()=>{for(var h=0;h<i;h++){var d=a[h];s||(v.delete(d.k),C(l,d.prev,d.next)),W(d.e,!s)}})}function Ra(l,a,e,v,c,i=null){var r=l,s={flags:a,items:new Map,first:null},u=(a&Z)!==0;if(u){var h=l;r=T?H($(h)):h.appendChild(na())}T&&M();var d=null,E=!1;V(()=>{var n=e(),_=fa(n)?n:n==null?[]:Q(n),o=_.length;if(E&&o===0)return;E=o===0;let w=!1;if(T){var p=r.data===X;p!==(o===0)&&(r=L(),H(r),b(!1),w=!0)}if(T){for(var A=null,I,m=0;m<o;m++){if(g.nodeType===8&&g.data===da){r=g,w=!0,b(!1);break}var f=_[m],t=v(f,m);I=aa(g,s,A,null,f,t,m,c,a),s.items.set(t,I),A=I}o>0&&H(L())}if(!T){var O=ua;pa(_,s,r,c,a,(O.f&k)!==0,v)}i!==null&&(o===0?d?y(d):d=D(()=>i(r)):d!==null&&F(d,()=>{d=null})),w&&b(!0),e()}),T&&(r=g)}function pa(l,a,e,v,c,i,r){var s=(c&oa)!==0,u=(c&(Y|z))!==0,h=l.length,d=a.items,E=a.first,n=E,_,o=null,w,p=[],A=[],I,m,f,t;if(s)for(t=0;t<h;t+=1)I=l[t],m=r(I,t),f=d.get(m),f!==void 0&&(f.a?.measure(),(w??=new Set).add(f));for(t=0;t<h;t+=1){if(I=l[t],m=r(I,t),f=d.get(m),f===void 0){var O=n?n.e.nodes_start:e;o=aa(O,a,o,o===null?a.first:o.next,I,m,t,v,c),d.set(m,o),p=[],A=[],n=o.next;continue}if(u&&Ta(f,I,t,c),f.e.f&k&&(y(f.e),s&&(f.a?.unfix(),(w??=new Set).delete(f))),f!==n){if(_!==void 0&&_.has(f)){if(p.length<A.length){var S=A[0],R;o=S.prev;var B=p[0],x=p[p.length-1];for(R=0;R<p.length;R+=1)U(p[R],S,e);for(R=0;R<A.length;R+=1)_.delete(A[R]);C(a,B.prev,x.next),C(a,o,B),C(a,x,S),n=S,o=x,t-=1,p=[],A=[]}else _.delete(f),U(f,n,e),C(a,f.prev,f.next),C(a,f,o===null?a.first:o.next),C(a,o,f),o=f;continue}for(p=[],A=[];n!==null&&n.k!==m;)(i||!(n.e.f&k))&&(_??=new Set).add(n),A.push(n),n=n.next;if(n===null)continue;f=n}p.push(f),o=f,n=f.next}if(n!==null||_!==void 0){for(var N=_===void 0?[]:Q(_);n!==null;)(i||!(n.e.f&k))&&N.push(n),n=n.next;var q=N.length;if(q>0){var ea=c&Z&&h===0?e:null;if(s){for(t=0;t<q;t+=1)N[t].a?.measure();for(t=0;t<q;t+=1)N[t].a?.fix()}ma(a,N,ea,d)}}s&&ta(()=>{if(w!==void 0)for(f of w)f.a?.apply()}),G.first=a.first&&a.first.e,G.last=o&&o.e}function Ta(l,a,e,v){v&Y&&J(l.v,a),v&z?J(l.i,e):l.i=e}function aa(l,a,e,v,c,i,r,s,u){var h=(u&Y)!==0,d=(u&_a)===0,E=h?d?va(c):K(c):c,n=u&z?K(r):r,_={i:n,v:E,k:i,a:null,e:null,prev:e,next:v};try{return _.e=D(()=>s(l,E,n),T),_.e.prev=e&&e.e,_.e.next=v&&v.e,e===null?a.first=_:(e.next=_,e.e.next=_.e),v!==null&&(v.prev=_,v.e.prev=_.e),_}finally{}}function U(l,a,e){for(var v=l.next?l.next.e.nodes_start:e,c=a?a.e.nodes_start:e,i=l.e.nodes_start;i!==v;){var r=j(i);c.before(i),i=r}}function C(l,a,e){a===null?l.first=e:(a.next=e,a.e.next=e&&e.e),e!==null&&(e.prev=a,e.e.prev=a&&a.e)}function Ca(l,a,e,v,c){var i=l,r="",s;V(()=>{if(r===(r=a()??"")){T&&M();return}s!==void 0&&(W(s),s=void 0),r!==""&&(s=D(()=>{if(T){g.data;for(var u=M(),h=u;u!==null&&(u.nodeType!==8||u.data!=="");)h=u,u=j(u);if(u===null)throw ca(),ha;P(g,h),i=H(u);return}var d=r+"",E=Ea(d);P($(E),E.lastChild),i.before(E)}))})}export{wa as a,Ra as e,Ca as h,Ia as i};
