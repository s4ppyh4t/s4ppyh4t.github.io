import{b as F,aj as S,a as y,p as L,h as T,c as M,E as ra,ak as K,al as Y,am as b,an as k,d as w,ao as na,C as fa,ap as Q,aq as D,g as G,ar as P,as as ia,at as la,au as sa,av as W,o as ta,q as ua,aw as B,ax as V,Y as va,N as U,ay as Z,az as $,aA as da,aB as oa,aC as ca,aD as j,aE as _a,aF as ha,aG as X,aH as Ea,f as ma,u as pa}from"./utils.CaBHRE2t.js";function Ra(i,a,e,s=null,_=!1){T&&M();var l=i,r=null,t=null,u=null,h=_?ra:0;F(()=>{if(u===(u=!!a()))return;let d=!1;if(T){const E=l.data===K;u===E&&(l=Y(),b(l),k(!1),d=!0)}u?(r?S(r):r=y(()=>e(l)),t&&L(t,()=>{t=null})):(t?S(t):s&&(t=y(()=>s(l))),r&&L(r,()=>{r=null})),d&&k(!0)},h),T&&(l=w)}function ga(i,a){return a}function Ta(i,a,e,s){for(var _=[],l=a.length,r=0;r<l;r++)ia(a[r].e,_,!0);var t=l>0&&_.length===0&&e!==null;if(t){var u=e.parentNode;la(u),u.append(e),s.clear(),g(i,a[0].prev,a[l-1].next)}sa(_,()=>{for(var h=0;h<l;h++){var d=a[h];t||(s.delete(d.k),g(i,d.prev,d.next)),W(d.e,!t)}})}function wa(i,a,e,s,_,l=null){var r=i,t={flags:a,items:new Map,first:null},u=(a&Z)!==0;if(u){var h=i;r=T?b($(h)):h.appendChild(na())}T&&M();var d=null,E=!1;F(()=>{var n=e(),c=fa(n)?n:n==null?[]:Q(n),o=c.length;if(E&&o===0)return;E=o===0;let I=!1;if(T){var p=r.data===K;p!==(o===0)&&(r=Y(),b(r),k(!1),I=!0)}if(T){for(var A=null,C,m=0;m<o;m++){if(w.nodeType===8&&w.data===da){r=w,I=!0,k(!1);break}var f=c[m],v=s(f,m);C=aa(w,t,A,null,f,v,m,_,a),t.items.set(v,C),A=C}o>0&&b(Y())}if(!T){var O=ta;Aa(c,t,r,_,a,(O.f&D)!==0,s)}l!==null&&(o===0?d?S(d):d=y(()=>l(r)):d!==null&&L(d,()=>{d=null})),I&&k(!0),e()}),T&&(r=w)}function Aa(i,a,e,s,_,l,r){var t=(_&oa)!==0,u=(_&(B|V))!==0,h=i.length,d=a.items,E=a.first,n=E,c,o=null,I,p=[],A=[],C,m,f,v;if(t)for(v=0;v<h;v+=1)C=i[v],m=r(C,v),f=d.get(m),f!==void 0&&(f.a?.measure(),(I??=new Set).add(f));for(v=0;v<h;v+=1){if(C=i[v],m=r(C,v),f=d.get(m),f===void 0){var O=n?n.e.nodes_start:e;o=aa(O,a,o,o===null?a.first:o.next,C,m,v,s,_),d.set(m,o),p=[],A=[],n=o.next;continue}if(u&&Ca(f,C,v,_),f.e.f&D&&(S(f.e),t&&(f.a?.unfix(),(I??=new Set).delete(f))),f!==n){if(c!==void 0&&c.has(f)){if(p.length<A.length){var H=A[0],R;o=H.prev;var z=p[0],q=p[p.length-1];for(R=0;R<p.length;R+=1)J(p[R],H,e);for(R=0;R<A.length;R+=1)c.delete(A[R]);g(a,z.prev,q.next),g(a,o,z),g(a,q,H),n=H,o=q,v-=1,p=[],A=[]}else c.delete(f),J(f,n,e),g(a,f.prev,f.next),g(a,f,o===null?a.first:o.next),g(a,o,f),o=f;continue}for(p=[],A=[];n!==null&&n.k!==m;)(l||!(n.e.f&D))&&(c??=new Set).add(n),A.push(n),n=n.next;if(n===null)continue;f=n}p.push(f),o=f,n=f.next}if(n!==null||c!==void 0){for(var N=c===void 0?[]:Q(c);n!==null;)(l||!(n.e.f&D))&&N.push(n),n=n.next;var x=N.length;if(x>0){var ea=_&Z&&h===0?e:null;if(t){for(v=0;v<x;v+=1)N[v].a?.measure();for(v=0;v<x;v+=1)N[v].a?.fix()}Ta(a,N,ea,d)}}t&&ua(()=>{if(I!==void 0)for(f of I)f.a?.apply()}),G.first=a.first&&a.first.e,G.last=o&&o.e}function Ca(i,a,e,s){s&B&&P(i.v,a),s&V?P(i.i,e):i.i=e}function aa(i,a,e,s,_,l,r,t,u){var h=(u&B)!==0,d=(u&ca)===0,E=h?d?va(_):U(_):_,n=u&V?U(r):r,c={i:n,v:E,k:l,a:null,e:null,prev:e,next:s};try{return c.e=y(()=>t(i,E,n),T),c.e.prev=e&&e.e,c.e.next=s&&s.e,e===null?a.first=c:(e.next=c,e.e.next=c.e),s!==null&&(s.prev=c,s.e.prev=c.e),c}finally{}}function J(i,a,e){for(var s=i.next?i.next.e.nodes_start:e,_=a?a.e.nodes_start:e,l=i.e.nodes_start;l!==s;){var r=j(l);_.before(l),l=r}}function g(i,a,e){a===null?i.first=e:(a.next=e,a.e.next=e&&e.e),e!==null&&(e.prev=a,e.e.prev=a&&a.e)}function Na(i,a,e,s,_){var l=i,r="",t;F(()=>{if(r===(r=a()??"")){T&&M();return}t!==void 0&&(W(t),t=void 0),r!==""&&(t=y(()=>{if(T){w.data;for(var u=M(),h=u;u!==null&&(u.nodeType!==8||u.data!=="");)h=u,u=j(u);if(u===null)throw _a(),ha;X(w,h),l=b(u);return}var d=r+"",E=Ea(d);X($(E),E.lastChild),l.before(E)}))})}function ba(i,a,e){ma(()=>{var s=pa(()=>a(i,e?.())||{});if(s?.destroy)return()=>s.destroy()})}export{ba as a,ga as b,wa as e,Na as h,Ra as i};
