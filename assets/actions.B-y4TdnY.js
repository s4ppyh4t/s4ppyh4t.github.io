import{b as X,an as S,c as D,p as L,E as $,h as I,a as G,ao as J,ap as O,ai as g,aq as R,d as k,ar as j,y as ee,as as K,at as y,g as V,au as Y,av as ae,aw as re,ax as ne,al as fe,k as ie,q as le,ay as B,az as F,U as se,I as z,aA as Q,ak as te,aB as ue,aC as ve,aD as ce,ae as oe,f as de,u as _e}from"./utils.CfRq9FGY.js";function Te(i,e,a,l=null,d=!1){I&&G();var s=i,f=null,c=null,_=null,h=d?$:0;X(()=>{if(_===(_=!!e()))return;let o=!1;if(I){const m=s.data===J;_===m&&(s=O(),g(s),R(!1),o=!0)}_?(f?S(f):f=D(()=>a(s)),c&&L(c,()=>{c=null})):(c?S(c):l&&(c=D(()=>l(s))),f&&L(f,()=>{f=null})),o&&R(!0)},h),I&&(s=k)}function Ie(i,e){return e}function he(i,e,a,l){for(var d=[],s=e.length,f=0;f<s;f++)ae(e[f].e,d,!0);var c=s>0&&d.length===0&&a!==null;if(c){var _=a.parentNode;re(_),_.append(a),l.clear(),N(i,e[0].prev,e[s-1].next)}ne(d,()=>{for(var h=0;h<s;h++){var o=e[h];c||(l.delete(o.k),N(i,o.prev,o.next)),fe(o.e,!c)}})}function me(i,e,a,l,d,s=null){var f=i,c={flags:e,items:new Map,first:null},_=(e&Q)!==0;if(_){var h=i;f=I?g(te(h)):h.appendChild(j())}I&&G();var o=null,m=!1;X(()=>{var r=a(),v=ee(r)?r:r==null?[]:K(r),u=v.length;if(m&&u===0)return;m=u===0;let x=!1;if(I){var p=f.data===J;p!==(u===0)&&(f=O(),g(f),R(!1),x=!0)}if(I){for(var A=null,T,E=0;E<u;E++){if(k.nodeType===8&&k.data===ue){f=k,x=!0,R(!1);break}var n=v[E],t=l(n,E);T=W(k,c,A,null,n,t,E,d,e),c.items.set(t,T),A=T}u>0&&g(O())}if(!I){var H=ie;Ee(v,c,f,d,e,(H.f&y)!==0,l)}s!==null&&(u===0?o?S(o):o=D(()=>s(f)):o!==null&&L(o,()=>{o=null})),x&&R(!0),a()}),I&&(f=k)}function Ee(i,e,a,l,d,s,f){var c=(d&ve)!==0,_=(d&(B|F))!==0,h=i.length,o=e.items,m=e.first,r=m,v,u=null,x,p=[],A=[],T,E,n,t;if(c)for(t=0;t<h;t+=1)T=i[t],E=f(T,t),n=o.get(E),n!==void 0&&(n.a?.measure(),(x??=new Set).add(n));for(t=0;t<h;t+=1){if(T=i[t],E=f(T,t),n=o.get(E),n===void 0){var H=r?r.e.nodes_start:a;u=W(H,e,u,u===null?e.first:u.next,T,E,t,l,d),o.set(E,u),p=[],A=[],r=u.next;continue}if(_&&pe(n,T,t,d),n.e.f&y&&(S(n.e),c&&(n.a?.unfix(),(x??=new Set).delete(n))),n!==r){if(v!==void 0&&v.has(n)){if(p.length<A.length){var b=A[0],C;u=b.prev;var U=p[0],M=p[p.length-1];for(C=0;C<p.length;C+=1)P(p[C],b,a);for(C=0;C<A.length;C+=1)v.delete(A[C]);N(e,U.prev,M.next),N(e,u,U),N(e,M,b),r=b,u=M,t-=1,p=[],A=[]}else v.delete(n),P(n,r,a),N(e,n.prev,n.next),N(e,n,u===null?e.first:u.next),N(e,u,n),u=n;continue}for(p=[],A=[];r!==null&&r.k!==E;)(s||!(r.e.f&y))&&(v??=new Set).add(r),A.push(r),r=r.next;if(r===null)continue;n=r}p.push(n),u=n,r=n.next}if(r!==null||v!==void 0){for(var w=v===void 0?[]:K(v);r!==null;)(s||!(r.e.f&y))&&w.push(r),r=r.next;var q=w.length;if(q>0){var Z=d&Q&&h===0?a:null;if(c){for(t=0;t<q;t+=1)w[t].a?.measure();for(t=0;t<q;t+=1)w[t].a?.fix()}he(e,w,Z,o)}}c&&le(()=>{if(x!==void 0)for(n of x)n.a?.apply()}),V.first=e.first&&e.first.e,V.last=u&&u.e}function pe(i,e,a,l){l&B&&Y(i.v,e),l&F?Y(i.i,a):i.i=a}function W(i,e,a,l,d,s,f,c,_){var h=(_&B)!==0,o=(_&ce)===0,m=h?o?se(d):z(d):d,r=_&F?z(f):f,v={i:r,v:m,k:s,a:null,e:null,prev:a,next:l};try{return v.e=D(()=>c(i,m,r),I),v.e.prev=a&&a.e,v.e.next=l&&l.e,a===null?e.first=v:(a.next=v,a.e.next=v.e),l!==null&&(l.prev=v,l.e.prev=v.e),v}finally{}}function P(i,e,a){for(var l=i.next?i.next.e.nodes_start:a,d=e?e.e.nodes_start:a,s=i.e.nodes_start;s!==l;){var f=oe(s);d.before(s),s=f}}function N(i,e,a){e===null?i.first=a:(e.next=a,e.e.next=a&&a.e),a!==null&&(a.prev=e,a.e.prev=e&&e.e)}function xe(i,e,a){de(()=>{var l=_e(()=>e(i,a?.())||{});if(l?.destroy)return()=>l.destroy()})}export{xe as a,Ie as b,me as e,Te as i};
